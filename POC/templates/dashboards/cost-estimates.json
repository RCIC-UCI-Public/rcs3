{
    "widgets": [
        {
            "height": 11,
            "width": 11,
            "y": 3,
            "x": 0,
            "type": "metric",
            "properties": {
                "sparkline": true,
                "metrics": [
                    [ { "expression": "SUM([m1,m2,m3])", "label": "Glacier-Put-Post-List-Requests (mean: ${AVG})", "id": "e1", "region": "us-west-2" } ],
                    [ { "expression": "SUM([m4,m5,m6,m7,m8,m9])", "label": "Bucket-Standard-Put-Post-List-Requests (mean: ${AVG})", "id": "e2", "region": "us-west-2" } ],
                    [ { "expression": "SUM([m10,m11,m12])", "label": "AllRequests (mean: ${AVG})", "id": "e3", "region": "us-west-2" } ],
                    [ { "expression": "0.83 * (  ((e3 - (e2 + e1))*.0004) + (e2*.005) + (e1*.03))/1000", "label": "API Cost (mean: $ ${AVG})", "id": "e4", "yAxis": "right", "region": "us-west-2" } ],
                    [ { "expression": "RUNNING_SUM(e4)", "label": "SUM API Cost ($ ${MAX})", "id": "e5", "yAxis": "right", "region": "us-west-2" } ],
                    [ "AWS/S3/Storage-Lens", "PostRequests", "metrics_version", "1.0", "storage_class", "GLACIER", "aws_region", "us-west-2", "aws_account_number", "774954368688", "configuration_id", "Single-Glass-of-Pain", "record_type", "ACCOUNT", { "label": "Glacier - PostRequests", "id": "m1", "visible": false, "region": "us-west-2" } ],
                    [ ".", "PutRequests", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", { "label": "Glacier - PutRequests", "id": "m2", "visible": false, "region": "us-west-2" } ],
                    [ ".", "ListRequests", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", { "label": "Glacier - ListRequests", "id": "m3", "visible": false, "region": "us-west-2" } ],
                    [ "...", "STANDARD", ".", ".", ".", ".", ".", ".", ".", ".", { "id": "m4", "label": "Standard - ListRequests", "visible": false, "region": "us-west-2" } ],
                    [ "...", "-", ".", ".", ".", ".", ".", ".", ".", ".", { "id": "m5", "label": "Bucket - ListRequests", "visible": false, "region": "us-west-2" } ],
                    [ ".", "PutRequests", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", { "id": "m6", "label": "Bucket - PutRequests", "visible": false, "region": "us-west-2" } ],
                    [ "...", "STANDARD", ".", ".", ".", ".", ".", ".", ".", ".", { "id": "m7", "label": "Standard - PutRequests", "visible": false, "region": "us-west-2" } ],
                    [ ".", "PostRequests", ".", ".", ".", "-", ".", ".", ".", ".", ".", ".", ".", ".", { "id": "m8", "label": "Bucket - PostRequests", "visible": false, "region": "us-west-2" } ],
                    [ "...", "STANDARD", ".", ".", ".", ".", ".", ".", ".", ".", { "id": "m9", "label": "Standard - PostRequests", "visible": false, "region": "us-west-2" } ],
                    [ ".", "AllRequests", ".", ".", ".", "GLACIER", ".", ".", ".", ".", ".", ".", ".", ".", { "id": "m10", "label": "GLACIER - All Requests", "visible": false, "region": "us-west-2" } ],
                    [ "...", "-", ".", ".", ".", ".", ".", ".", ".", ".", { "id": "m11", "label": "Bucket - AllRequests", "visible": false, "region": "us-west-2" } ],
                    [ "...", "STANDARD", ".", ".", ".", ".", ".", ".", ".", ".", { "id": "m12", "label": "Standard - AllRequests", "visible": false, "region": "us-west-2" } ]
                ],
                "view": "timeSeries",
                "stacked": false,
                "region": "us-west-2",
                "stat": "Sum",
                "period": 86400,
                "title": "API Costs",
                "yAxis": {
                    "right": {
                        "label": "$$",
                        "showUnits": false
                    },
                    "left": {
                        "label": "Requests",
                        "showUnits": false
                    }
                }
            }
        },
        {
            "height": 11,
            "width": 12,
            "y": 3,
            "x": 11,
            "type": "metric",
            "properties": {
                "metrics": [
                    [ { "expression": ".55*((m1*258.05/365) + (m4*44.24/365))/(1024*1024*1024*1024)", "label": "Daily Storage Cost (mean: $ ${AVG})", "id": "e1", "yAxis": "right", "region": "us-west-2", "color": "#2ca02c" } ],
                    [ { "expression": "RUNNING_SUM(e1)", "label": "Total Cost ($ ${MAX})", "id": "e2", "yAxis": "right", "region": "us-west-2", "color": "#98df8a" } ],
                    [ "AWS/S3/Storage-Lens", "StorageBytes", "metrics_version", "1.0", "storage_class", "STANDARD", "aws_region", "us-west-2", "aws_account_number", "774954368688", "configuration_id", "Single-Glass-of-Pain", "record_type", "ACCOUNT", { "id": "m1", "region": "us-west-2", "color": "#bcbd22" } ],
                    [ ".", "DeleteMarkerStorageBytes", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", { "id": "m7", "region": "us-west-2", "color": "#ffbb78" } ],
                    [ ".", "NonCurrentVersionStorageBytes", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", { "id": "m8", "region": "us-west-2", "color": "#dbdb8d" } ],
                    [ ".", "CurrentVersionStorageBytes", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", { "id": "m10", "region": "us-west-2", "visible": false } ],
                    [ ".", "StorageBytes", ".", ".", ".", "GLACIER", ".", ".", ".", ".", ".", ".", ".", ".", { "id": "m4", "region": "us-west-2" } ],
                    [ ".", "DeleteMarkerStorageBytes", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", { "id": "m3", "region": "us-west-2" } ],
                    [ ".", "NonCurrentVersionStorageBytes", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", { "id": "m2", "region": "us-west-2", "color": "#c7c7c7" } ]
                ],
                "view": "timeSeries",
                "stacked": false,
                "region": "us-west-2",
                "stat": "Sum",
                "period": 86400,
                "yAxis": {
                    "right": {
                        "label": "Cost $",
                        "showUnits": false
                    },
                    "left": {
                        "label": "Storage Bytes",
                        "showUnits": false
                    }
                },
                "title": "Storage Costs"
            }
        },
        {
            "height": 3,
            "width": 23,
            "y": 0,
            "x": 0,
            "type": "metric",
            "properties": {
                "sparkline": true,
                "metrics": [
                    [ { "expression": ".55*((m1*258.05/365) + (m4*44.24/365))/(1024*1024*1024*1024)", "label": "Daily Storage Cost (mean: $ ${AVG})", "id": "e1", "yAxis": "right", "region": "us-west-2" } ],
                    [ { "expression": "RUNNING_SUM(e1)", "label": "Total Cost ($ ${MAX})", "id": "e2", "yAxis": "right", "region": "us-west-2" } ],
                    [ "AWS/S3/Storage-Lens", "StorageBytes", "metrics_version", "1.0", "storage_class", "STANDARD", "aws_region", "us-west-2", "aws_account_number", "774954368688", "configuration_id", "Single-Glass-of-Pain", "record_type", "ACCOUNT", { "id": "m1", "region": "us-west-2", "visible": false } ],
                    [ { "expression": "SUM([m7,m8])", "label": "STANDARD Snapshot Bytes", "id": "e3", "region": "us-west-2", "visible": false } ],
                    [ "AWS/S3/Storage-Lens", "StorageBytes", "metrics_version", "1.0", "storage_class", "GLACIER", "aws_region", "us-west-2", "aws_account_number", "774954368688", "configuration_id", "Single-Glass-of-Pain", "record_type", "ACCOUNT", { "id": "m4", "region": "us-west-2", "visible": false } ],
                    [ { "expression": "SUM([m2,m3])", "label": "GLACIER - Snapshot Bytes", "id": "e4", "region": "us-west-2", "visible": false } ],
                    [ { "expression": ".9095*m4", "label": "Glacier Storage TBytes", "id": "e5" } ],
                    [ { "expression": ".9095*m1", "label": "Standard Storage TBytes", "id": "e8" } ],
                    [ { "expression": ".9095*e4", "label": "Glacier Snapshot TBytes", "id": "e6" } ],
                    [ { "expression": ".9095*e3", "label": "Standard Snapshot TBytes", "id": "e7" } ],
                    [ "AWS/S3/Storage-Lens", "DeleteMarkerStorageBytes", "metrics_version", "1.0", "storage_class", "STANDARD", "aws_region", "us-west-2", "aws_account_number", "774954368688", "configuration_id", "Single-Glass-of-Pain", "record_type", "ACCOUNT", { "id": "m7", "region": "us-west-2", "visible": false } ],
                    [ ".", "NonCurrentVersionStorageBytes", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", { "id": "m8", "region": "us-west-2", "visible": false } ],
                    [ ".", "CurrentVersionStorageBytes", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", { "id": "m10", "region": "us-west-2", "visible": false } ],
                    [ ".", "NonCurrentVersionStorageBytes", ".", ".", ".", "GLACIER", ".", ".", ".", ".", ".", ".", ".", ".", { "id": "m2", "region": "us-west-2", "visible": false } ],
                    [ ".", "DeleteMarkerStorageBytes", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", { "id": "m3", "region": "us-west-2", "visible": false } ]
                ],
                "view": "singleValue",
                "stacked": false,
                "region": "us-west-2",
                "stat": "Sum",
                "period": 86400,
                "yAxis": {
                    "right": {
                        "label": "Cost $",
                        "showUnits": false
                    },
                    "left": {
                        "label": "Storage Bytes",
                        "showUnits": false
                    }
                },
                "title": "Storage Costs - Breakdown"
            }
        }
    ]
}
